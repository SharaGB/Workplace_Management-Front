{"ast":null,"code":"import axios from 'axios';\nconst baseURL = 'http://localhost:8000/api/desktop/';\nexport const availableStations = async object => {\n  return await axios.get(baseURL, object);\n};\nexport const createBooking = async object => {\n  return await axios.post('http://localhost:8000/api/reservation/', object);\n};\nexport const submit = async (e, newReservation, setShowErrorMsg, setFinalShowPickTime, navigate) => {\n  e.preventDefault();\n  const today = Date.now();\n  const dateSelected = new Date(newReservation.startDate).getTime();\n\n  if (dateSelected < today) {\n    alert('it is not possible to make the reservation, invalid date');\n    setFinalShowPickTime(false);\n    return;\n  }\n\n  try {\n    let start_hour = newReservation.startDate;\n    let finish_hour = start_hour.split('T')[0] + 'T' + newReservation.finalDate;\n    let desktop = localStorage.getItem('station');\n    let user = localStorage.getItem('user_id');\n    await createBooking({\n      \"user\": user,\n      \"desktop\": desktop,\n      \"status\": true,\n      \"start_hour\": start_hour,\n      \"finish_hour\": finish_hour\n    }).then(res => {\n      localStorage.removeItem('station');\n      if (window.location.href = './myreservations') navigate({\n        state: {\n          message: 'Reserve created successfully!'\n        }\n      });\n    });\n  } catch (err) {\n    console.log(err);\n    setShowErrorMsg('Some error occurred when making the reservation');\n  }\n};\nexport const startTime = (e, setNewReservation, newReservation, setFinalShowPickTime, setStationSelected, setShowErrorMsg) => {\n  const startDate = e.target.value;\n  setShowErrorMsg(false);\n  setStationSelected(false);\n  setNewReservation({ ...newReservation,\n    [e.target.name]: startDate\n  });\n  startDate !== null ? setFinalShowPickTime(true) : setFinalShowPickTime(false);\n};\nexport const finalTime = (newReservation, e, setNewReservation) => {\n  const finalDate = e.target.value;\n  setNewReservation({ ...newReservation,\n    [e.target.name]: finalDate\n  });\n};\nexport const verifyAvailable = async (e, newReservation, setStationsAvailable, setShowPickStationAvailable) => {\n  e.preventDefault();\n  const initialDate = newReservation.startDate;\n  const endDate = newReservation.finalDate;\n  const stations = await availableStations({\n    startDate: initialDate,\n    finalDate: endDate\n  });\n  console.log(stations.data);\n  setStationsAvailable(stations.data);\n  setShowPickStationAvailable(true);\n};\nexport const handlePickSelected = (event, station, setStationSelected, setShowPickStationAvailable) => {\n  event.preventDefault();\n  localStorage.setItem('station', station);\n  setStationSelected(station);\n  setShowPickStationAvailable(false);\n};\nexport const ShowDateReservation = _ref => {\n  let {\n    reservation\n  } = _ref;\n  const initialDate = new Date().toLocaleDateString();\n  const startHour = new Date(reservation.startDate).getHours().toString().padStart(2, '0');\n  const startMinutes = new Date(reservation.startDate).getMinutes().toString().padStart(2, '0');\n  return `${reservation.startDate} from ${startHour}:${startMinutes} to ${reservation.finalDate}`;\n};\n_c = ShowDateReservation;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShowDateReservation\");","map":{"version":3,"names":["axios","baseURL","availableStations","object","get","createBooking","post","submit","e","newReservation","setShowErrorMsg","setFinalShowPickTime","navigate","preventDefault","today","Date","now","dateSelected","startDate","getTime","alert","start_hour","finish_hour","split","finalDate","desktop","localStorage","getItem","user","then","res","removeItem","window","location","href","state","message","err","console","log","startTime","setNewReservation","setStationSelected","target","value","name","finalTime","verifyAvailable","setStationsAvailable","setShowPickStationAvailable","initialDate","endDate","stations","data","handlePickSelected","event","station","setItem","ShowDateReservation","reservation","toLocaleDateString","startHour","getHours","toString","padStart","startMinutes","getMinutes"],"sources":["/home/shara/Workplace_Management-Front/Frontend/src/components/pages/newReservation/NewReservation.jsx"],"sourcesContent":["import axios from 'axios';\n\nconst baseURL = 'http://localhost:8000/api/desktop/';\n\nexport const availableStations = async (object) => {\n  return await axios.get(baseURL, object)\n}\n\nexport const createBooking = async (object) => {\n  return await axios.post('http://localhost:8000/api/reservation/', object)\n}\n\nexport const submit = async (\n  e,\n  newReservation,\n  setShowErrorMsg,\n  setFinalShowPickTime,\n  navigate\n) => {\n  e.preventDefault();\n  const today = Date.now();\n  const dateSelected = new Date(newReservation.startDate).getTime();\n  if (dateSelected < today) {\n    alert('it is not possible to make the reservation, invalid date');\n    setFinalShowPickTime(false);\n    return;\n  }\n  try {\n    let start_hour = newReservation.startDate\n    let finish_hour = start_hour.split('T')[0] + 'T' + newReservation.finalDate\n    let desktop = localStorage.getItem('station')\n    let user = localStorage.getItem('user_id')\n    await createBooking(\n      {\n        \"user\": user,\n        \"desktop\": desktop,\n        \"status\": true,\n        \"start_hour\": start_hour,\n        \"finish_hour\": finish_hour,\n      }).then(res => {\n        localStorage.removeItem('station')\n        if (window.location.href = './myreservations')\n          navigate({ state: { message: 'Reserve created successfully!' } });\n      });\n  } catch (err) {\n    console.log(err);\n    setShowErrorMsg('Some error occurred when making the reservation');\n  }\n};\n\nexport const startTime = (\n  e,\n  setNewReservation,\n  newReservation,\n  setFinalShowPickTime,\n  setStationSelected,\n  setShowErrorMsg\n) => {\n  const startDate = e.target.value;\n  setShowErrorMsg(false);\n  setStationSelected(false);\n  setNewReservation({ ...newReservation, [e.target.name]: startDate });\n  startDate !== null ? setFinalShowPickTime(true) : setFinalShowPickTime(false);\n};\n\nexport const finalTime = (newReservation, e, setNewReservation) => {\n  const finalDate = e.target.value\n  setNewReservation({ ...newReservation, [e.target.name]: finalDate });\n};\n\nexport const verifyAvailable = async (e, newReservation, setStationsAvailable, setShowPickStationAvailable) => {\n  e.preventDefault();\n  const initialDate = (newReservation.startDate);\n  const endDate = newReservation.finalDate;\n  const stations = await availableStations({\n    startDate: initialDate,\n    finalDate: endDate,\n  });\n  console.log(stations.data)\n  setStationsAvailable(stations.data);\n  setShowPickStationAvailable(true);\n};\n\nexport const handlePickSelected = (event, station, setStationSelected, setShowPickStationAvailable) => {\n  event.preventDefault();\n  localStorage.setItem('station', station);\n  setStationSelected(station);\n  setShowPickStationAvailable(false);\n};\n\nexport const ShowDateReservation = ({ reservation }) => {\n  const initialDate = new Date().toLocaleDateString();\n  const startHour = new Date(reservation.startDate).getHours().toString().padStart(2, '0');\n  const startMinutes = new Date(reservation.startDate).getMinutes().toString().padStart(2, '0');\n\n  return `${reservation.startDate} from ${startHour}:${startMinutes} to ${reservation.finalDate}`;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}